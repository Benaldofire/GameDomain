<body></body>
    <!--It's in the header ejs-->
    <main>
        <section class="featured featured-container">
            <h2 class="section-title top-left">Featured</h2>
            <!-- main full width images-->
                <div class="featured-main">
                    <img src=<%=popularGames[0].background_img%> alt=<%=popularGames[0].name%> id="featured-img">
                    <div class="text-block">
                        <h4 id="featured_title"><%=popularGames[0].name%></h4>
                        <div id = "featured_description"><%=popularGames[0].description%></div>
                        <div id="featured_rating">
                            <% let rating = popularGames[0].rating;
                            if(rating == '' || rating ==null){
                                rating = "N/A";
                            }%>
                            <span><strong>Rating:</strong> <%=rating%> </span>
                        </div>
                    </div>
                    <!-- Next and previous buttons -->
                    <a id="prev">❮</a>
                    <a id="next">❯</a>
                </div>
                
                <!-- Preview images -->
                <div class="preview">
                    <div id="row"></div>
                </div>
        </section>

        <section class="intro">
            <h3 class="section-title"> Discover <span class="text-primary">current</span> and <span class="text-primary">upcoming</span> games right here at Game Domain</h2>
        </section>

        <section class="categories-showcase">
            <header>
                <h2 class="section-title text-primary">Popular Categories</h2>
            </header>
            <!-- use display flex for the btn categories -->
            <div class="categories flex">
                <div class="category">
                    <a href="#Shooter">
                        <img src="img/first person shooter.jpg" alt="Shooter">
                        <h4 class="category-title">Shooter</h4>
                    </a>
                </div>
                <div class="category">
                    <a href="#Role-Playing-games">
                        <img src="img/RPG.jpg" alt="Role-Playing Game">
                        <h4 class="category-title">Role-Playing Game</h4>
                    </a>
                </div>
                <div class="category">
                    <a href="#action">
                        <img src="img/action.jpg" alt="Action games">
                        <h4 class="category-title">Action games</h4>
                    </a>
                </div>
                <div class="category">
                    <a href="#battle-royale">
                        <img src="img/Battle Royal.jpg" alt="Battle Royale">
                        <h4 class="category-title">Battle Royale</h4>
                    </a>
                </div>
            </div>
        </section>

        <!-- In the future use Javascript to generate more categories-->
        <!-- Within each category, we will look into a database to see how many games are there, then dynamically generate the first top 10 games-->
        <section class="category-1" id="Shooter">
            <header>
                <h2 class="section-title text-primary">Shooter</h2>
            </header>
            <div class="games flex">
                <!--for each game, generate a div container for it-->
                <% for(game of fpsGames){%> 
                    <div class="game">
                        <h4 class="game-title"><%=game.name%></h3>
                        <img src=<%=game.background_img%> alt=<%=game.name%> class="game_img">
                        <div class="game-description">
                            <%let description =  game.description.slice(0,game.description.indexOf(" ", 150));%>
                            <p ><%-description%></p>...<a href="/games/<%=game.id%>">Visit page</a></p>
                        </div>
                    </div>
                <%}%>
            </div>

            <div class="view-more">
                <a href="/platform/all/shooter" class="btn btn-accent">View More</a>
            </div>

        </section>

        <section class="category-1" id="Role-Playing-games">
            <header>
                <h2 class="section-title text-primary"> Role-Playing Games</h2>
            </header>
            <div class="games flex">
                <% for(game of rpgGames){%> 
                    <div class="game">
                        <h4 class="game-title"><%=game.name%></h3>
                        <img src=<%=game.background_img%> alt=<%=game.name%> class="game_img">
                        <div class="game-description">
                            <p ><%=game.description%></p>
                        </div>
                    </div>
                <%}%>
            </div>

            <div class="view-more">
                <a href="/platform/all/rpg" class="btn btn-accent">View More</a>
            </div>

        </section>

        <section class="category-1" id="action">
            <header>
                <h2 class="section-title text-primary"> Action</h2>
            </header>
            <div class="games flex">
                <% for(game of actionGames){%> 
                    <div class="game">
                        <h4 class="game-title"><%=game.name%></h3>
                        <img src=<%=game.background_img%> alt=<%=game.name%> class="game_img">
                        <div class="game-description">
                            <p ><%=game.description%></p>
                        </div>
                    </div>
                <%}%>
            </div>

            <div class="view-more">
                <a href="/platform/all/action" class="btn btn-accent">View More</a>
            </div>

        </section>

        <section class="category-1" id="battle-royale">
            <header>
                <h2 class="section-title text-primary"> Battle Royale</h2>
            </header>
            <div class="games flex">
                <% for(game of battleRoyalGames){%> 
                    <div class="game">
                        <h4 class="game-title"><%=game.name%></h3>
                        <img src=<%=game.background_img%> alt=<%=game.name%> class="game_img">
                        <div class="game-description">
                            <p ><%=game.description%></p>
                        </div>
                    </div>
                <%}%>
            </div>

            <div class="view-more">
                <a href="/platform/all/battleroyale" class="btn btn-accent">View More</a>
            </div>

        </section>
        
    </main>

    <!--It's in the footer ejs-->
    <!--<script src="script.js" defer></script>-->
</body>
<script src="/script.js" async></script>
